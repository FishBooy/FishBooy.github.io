---
title: ES6中的数组去重
date: 2018-06-20 13:17:35
tags:
---

## filter & indexOf

ES5 中常用数组去重方法如下：

```javascript
var array = ['🐶', 'many', '🐶', 'puppies', '🐶', '🐶'];
var newArray = array.filter(function (item, index) {
    return array.indexOf(item) === index;
});
// newArray: ["🐶", "many", "puppies"]
```

## reduce & includes

在 ES6 中，Array.prototype 上新增了 includes 方法，接受任意类型的值为参数并返回一个布尔值用来表示数组是否包含某元素。因此，去重的方法可以改造如下：

```javascript
const array = ['🐶', 'many', '🐶', 'puppies', '🐶', '🐶'];
const newArray = array.reduce(function (accu, item) {
    return accu.includes(item) ? accu : [...accu, item];
}, []);
```

## Set 类型

类型上的变化是 ES6 的主要改动之一，其中新增的集合类型 Set 可以帮助我们更简单的进行数组去重。如下：

```javascript
const array = ['🐶', 'many', '🐶', 'puppies', '🐶', '🐶'];

const newArray = [...new Set(array)];
// 等同于 const newArray = Array.from(new Set(array));
```

Set 类型可以使用可迭代对象进行初始化，当迭代对象中包含重复值时，set 会自动进行去重。因此`new Set(array)`的结果是一个已经去重的 set 集合。由于 Set 类型是可迭代的，因此可以便捷的使用扩展操作符对其进行扩展用于生成一个对应的去重数组，也就是上例中的`newArray`。

此外，ES6 中还为全局构造函数 Array 增加了一个新方法：Array.from，该方法接受一个可迭代对象为参数，返回一个包含其迭代值的数组。因此，可以用 from 方法替代扩展操作符来生成去重数组。
