---
title: '掌握开发者工具—控制台 [译]'
tags:
  - - 操作符
    - 类型转换
categories:
  - - 技术
    - Javascript
    - ES5
date: 2017-02-01 20:00:00
---


当你在调试前端web应用的时候，开发者工具中的控制台会是最强大的工具之一。控制台的API提供了一些列可以使调试变得更加简单的方法，比如常见的“console.log( )”或"console.dir( )"。但实际上，它还有很多其他有用的功能。

在这片文章中，你将会学习到如何使用console API提供的方法来调试web应用。某些浏览器相对其他浏览器对API中的方法支持的可能并不全面，因此在展开文章的过程中我将会指出任何的兼容性问题。

让我们马上进入正文！

使用控制台
如果你以前没有用过console，不用担心，接下来我将告诉你如何访问和使用console。如果你对于console调试已经很熟悉了，你可以直接略过跳到下一节。

有多种打开浏览器开发者工具的方法，其中最简单的一种方法就是：在页面某处点击右键，然后在出现的菜单中选择“审查元素”。你也可以使用快捷键，对于大部分浏览器来说：在Mac上是Alt+Command+I，在windows上是Ctrl+Shift+I。打开开发者工具后，点击Console选项卡就可以切换到控制台了。

在chrome(版本:63.0.3239.132)中显示如下：





注：本文中我们所讲述和使用的是浏览器自带的开发者工具。有许多浏览器的扩展插件也会提供和开发者工具类似的功能，Firefox中的Firebug插件便是其中之一，但是对于Firebug中的console提供的许多方法，Firefox默认的console是不支持的。
现在你已经打开了控制台，让我们执行一个简单的语句。将下面的语句在控制台中输入并按回车：

console.log('Hello World!')
你将看到字符串“Hello World!”被打印在了控制台中(如下所示)。



Great! 现在你已经了解如何使用控制台了，接下来让我们看看所有你可以用来调试web应用的console方法。

console.log(object[,object,...])
我们首先来看一下最常用的console方法：console.log( )。这个方法将对象简单地输出到控制台中。如果你传入了多个对象，这些对象将被连接成一个用空格分隔的字符串打印在控制台中。

console.log('This is a string',{foo: 'bar'},{bar: 'foo'});


第一个参数可以包含format specifiers(格式化标识符)，用来规定随后传入的数据的格式和位置。

var number = 11 * 9;
var color = 'red';

console.log('%d %s balloons',number,color);


开发者工具中支持的格式标识符有：

FORMAT SPECIFIER	DESCRIPTION
s%	字符串(String)
%d or %i	整数(Integer)
%f	浮点数(Floating point value)
%o	可折叠DOM元素(类似于开发者工具“Element”选项卡所展示的节点形式)
%O	可伸缩显示的javascript对象
%c	使用css格式化输出的样式
使用%c格式化标识符能让控制台的输出具有样式。

console.log('%cThis text is styled!','color: #86CC00; background-color: blue; font-size: 20px; padding: 3px;');


console.assert(expression,object)
console.assert方法包含两个参数，一个布尔表达式和一个对象。如果表达式的值为true，对象就不会被打印，反之则会打印在控制台中。

var count = 5;
console.assert(count > 10, 'count is not larger than 10');
上例中的表达式是为了检测变量count是否比10大，如果不是就会在控制台打印出相应的信息“count is not larger than 10”。



console.clear( )
console.clear方法会清除在控制台中所有输出的信息。

注：该方法不被Firefox自带的开发工具支持，但是在扩展插件Firebug中是可以使用的。
console.count(label)
console.count方法会打印出它被调用过的次数。如果console.count方法每次在同样的位置以同样的方式被调用，那么你会得到一个准确的调用次数值。

function clickHandler(){
    console.count('Click handler called');
    ...
}
提示：在控制台中输入时可以使用快捷键Shift+Enter进行换行，以便于一次输入多行语句或表达式。
你可以用for循环测试上例中的count方法是否生效。

for (var i; i<3; i++){
    clickHandler();
}
这段代码会调用三次clickHandler方法。



注:console.count方法在Firefox中同样不被支持，但是在Firebug中是支持的。
console.dir(object)
console.dir方法会以对象字面量的格式把传入的对象打印到控制台。dir方法在检查HTML元素的时候是非常有用的，因为它会把元素作为DOM对象来显示而不是console.log中打印的XML节点形式。



console.dirxml(object)
console.dirxml方法将传入的对象按照XML节点的形式打印出来。对于普通的javascript对象和HTML元素来说，console.dirxml( )和console.log( )的输出结果是一样的。

console.error(object[,object,...])
console.error方法能接受一个或多个对象作为参数，并在控制台中将对象打印出来。error方法和log方法类似，但是error方法能够进行堆栈跟踪将打印内容的输出位置显示出来。erro方法的输出会被控制台标识为“错误”类型(Error，其他类型还有Info、Warnings、Verbose)。error方法在编写错误处理程序的时候是非常有用的。



console.group(object[,object,...]) & console.groupEnd( )
console.group方法用来将控制台中的一系列log信息组合在一起。从console.group被调用直到console.groupEnd( )关闭分组，这期间所有的输出信息都会被归到一组。

你可以传入可选的标题参数以便在控制台中区分出对应的分组。



console.group( )的分组是允许嵌套的。

console.group('Group One');
console.group('Group Two');

....

console.groupEnd();//Close group two
console.groupEnd();//Close group one
console.groupCollapsed(object[,object,...])
console.groupCollapsed方法和group方法在使用和输出上是相同的（都以groupEnd( )结束分组），只不过两种方法在控制台中对分组的显示形式不一样，group是将分组展开而groupCollapsed方法则是将分组折叠。对于group中的示例，用groupCollapsed方法如下：



console.info(object[,object,...])
console.info方法使用起来和console.log是一样的，但是console.info( )打印出的信息会被添加上“信息”类型(Info)的标识。这一点对于调试来说是非常便捷的，因为控制台中提供了根据类型来筛选信息的功能。



不过根据当前chrome版本的测试结果，info已经和log的处理保持一致了并没有添加特殊的信息类型标识。

console.profile([profile]) & console.profileEnd( )
console.profile方法将会开启一个新的CPU profile的创建，前提是开发者工具已经打开。你可以传入一个字符串来指定CPU profile的名字，console.profileEnd( )执行后则CPU profile创建完毕。

function animationUI() {
    console.profile('Animating');
    //Animate something...
    console.profileEnd();
}
上面的代码展示了如何使用profile方法为animateUI方法创建CPU profile。



注：chrome旧的版本中的Profiles(显示CPU profiles的地方)和Timelines面板，新版本中已经被Performance面板取代。但是，Profiles并没有被彻底删除，只是暂时被放置在了“More Tools->Javascript Profiler”中。

Javascript Profiler的功能是记录CPU profiles。每个CPU profile的功能则是统计页面上对应的javascrip函数的执行时间。示例中的Animating的文件内容就对应了animationUI函数执行时消耗的时间。
console.table(data)
console.table方法能够将输出的有结构的数据按照可交互的表格形式在控制台中展示出来。这个方法在测试AJAX请求返回的数据时是很方便的。



注: table方法在Firefox中同样不被支持，而在Firebug中是支持的。
console.time(label) & console.timeEnd(label)
console.time和console.timeEnd方法能够计算出一段代码的执行所花费的时间。time和timeEnd需要传入相同的参数。



console.trace( )
console.trace方法将在该方法调用处打印出堆栈信息。



console.warn(object[,object,...])
最后介绍的是console.warn方法，这个方法会在控制台输出信息并添加“警告”标志。

console.warn('This is a warning.');


结语
看完这篇文章，你应该已经学到了各种用来调试web的console方法，这其中有些方法可能会很少用到，不过知道这些方法对于了解能够从控制台获取哪些信息是非常有用处的。

我建议你查看下面我列举的一些延伸阅读，尤其是Google Developers官网的《dev tools tips and tricks》。

延伸阅读
MDN: Console Documentation
Google Developers: Console API Reference
Google Developers: Dev Tools Tips and Tricks
原文信息
地址：Mastering The Developer Tools Console
作者：Matt West
翻译备注：原文中的console.timeline方法，因为只在chrome中支持且当前版本中这个方法已经被弃用，因此timeline和与其相关的console.timeStamp部分没有翻译，想要了解这些方法的详细信息可以参考延伸阅读中的Google Developers文档。另外，因为chrome版本不一致，翻译时对于部分图片和文字也进行了替换和特别说明。